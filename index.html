<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SakhiTech</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="container">
    <h1>ğŸŒ¸ SakhiTech</h1>
    <p class="subtitle">AI-Powered Women Safety Assistant</p>

    <div id="chatBox" class="chat-box"></div>

    <input type="text" id="userInput" placeholder="Type your concern here...">
    <button onclick="sendMessage()">Send</button>

    <hr>

    <!-- LOCATION -->
    <button class="feature-btn" onclick="getLocation()">ğŸ“ Share My Location</button>
    <p id="locationOutput"></p>

    <!-- SOS -->
    <button class="sos-btn" onclick="sendSOS()">ğŸš¨ SOS Emergency</button>

    <!-- HELPLINES -->
    <div class="helplines">
      <h3>ğŸ“ Emergency Helplines</h3>
      <p>112 â€“ National Emergency</p>
      <p>1091 â€“ Women Helpline</p>
      <p>181 â€“ Women Safety</p>
    </div>
  </div>

<script>
async function sendMessage() {
  const input = document.getElementById("userInput");
  const chatBox = document.getElementById("chatBox");

  if (input.value.trim() === "") return;

  chatBox.innerHTML += `<p class="user">You: ${input.value}</p>`;

  const response = await fetch("http://localhost:3000/chat", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ message: input.value })
  });

  const data = await response.json();
  chatBox.innerHTML += `<p class="ai">AI: ${data.reply}</p>`;

  input.value = "";
}

// ğŸ“ LOCATION FEATURE
function getLocation() {
  const output = document.getElementById("locationOutput");

  if (!navigator.geolocation) {
    output.innerText = "Geolocation not supported";
    return;
  }

  navigator.geolocation.getCurrentPosition(
    (position) => {
      output.innerText =
        `ğŸ“ Location detected:
Latitude: ${position.coords.latitude}
Longitude: ${position.coords.longitude}`;
    },
    () => {
      output.innerText = "Unable to access location";
    }
  );
}

// ğŸš¨ SOS FEATURE
function sendSOS() {
  alert("ğŸš¨ SOS Alert Sent!\nLocation & alert shared with trusted contacts.");
}
</script>

</body>
</html>
